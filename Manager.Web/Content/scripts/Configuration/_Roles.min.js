var MODULE=function(n,t,i,r,u,f){function s(t){o.settings=n.extend(o.settings,t);e=o;h()}function h(){var t=function(){var t=e.elems.getRoles();e.settings.setLanguageGrid();t.grid.jsGrid({filtering:!0,editing:!0,sorting:!0,paging:!0,pagerFormat:"{first} {prev} {pages} {next} {last} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {pageIndex} / {pageCount}",pagePrevText:"<",pageNextText:">",pageFirstText:"<<",pageLastText:">>",inserting:!0,autoload:!0,pageSize:15,pageButtonCount:20,confirmDeleting:!1,invalidNotify:function(t){var i=n.map(t.errors,function(n){return n.field.title+": "+n.message||null});u.message.error(i.join("\n"),this.invalidMessage)},onItemDeleting:function(n){n.item.deleteConfirmed||(n.cancel=!0,u.message.confirm(t.grid.messages.isSureDeleteRow.content(n.item),t.grid.messages.isSureDeleteRow.title,function(i){i&&(n.item.deleteConfirmed=!0,t.grid.jsGrid("deleteItem",n.item))}))},controller:{loadData:function(i){var r=n.Deferred();return n.ajax({type:"GET",url:t.grid.url.GetAllRoles,dataType:"json",data:i}).done(function(n){r.resolve(n.result)}),r.promise()},insertItem:function(n){u.ui.setBusy(null,e.settings.callAjaxServer(t.grid.url.CreateRole,n).done(function(r){u.notify.success(r.message);n.isDefault&&u.ui.setBusy(null,i.setTimeout(function(){t.grid.jsGrid("loadData");u.ui.clearBusy()},2e3))}))},updateItem:function(n){u.ui.setBusy(null,e.settings.callAjaxServer(t.grid.url.UpdateRole,n).done(function(r){u.notify.success(r.message);n.isDefault&&u.ui.setBusy(null,i.setTimeout(function(){t.grid.jsGrid("loadData");u.ui.clearBusy()},2e3))}))},deleteItem:function(n){u.ui.setBusy(null,e.settings.callAjaxServer(t.grid.url.DeleteRole,n).done(function(n){u.notify.success(n.message);u.ui.setBusy(null,i.setTimeout(function(){t.grid.jsGrid("loadData");u.ui.clearBusy()},2e3))}))}},fields:[{name:"id",type:"number",width:50,align:"center",visible:!1},{name:"name",title:t.grid.columnsDisplayName.Name,type:"text",validate:"required",width:"30%",filterTemplate:function(){if(!this.filtering)return"";var t=this._grid,n=this.filterControl=this._createTextBox();if(this.autosearch)n.on("keyup",function(n){t.search();n.preventDefault()});return n},itemTemplate:function(n,i){var r="";return i.isStatic||i.isDeleted||i.isDefault?(r=i.name,i.isStatic&&(r=r+"<div title='"+t.grid.labels.STATIC.title+"' class='label label-info label-static' data-toggle='tooltip'>"+t.grid.labels.STATIC.name+"<\/div>"),i.isDeleted&&(r=r+"<div title='"+t.grid.labels.DELETE.title+"' class='label label-info label-delete' data-toggle='tooltip'>"+t.grid.labels.DELETE.name+"<\/div>"),i.isDefault&&(r=r+"<div title='"+t.grid.labels.DEFAULT.title+"' class='label label-info label-default' data-toggle='tooltip'>"+t.grid.labels.DEFAULT.name+"<\/div>"),r):n},insertTemplate:function(){var n=jsGrid.fields.text.prototype.insertTemplate.apply(this,arguments);return n.attr("placeholder",t.grid.addRolePlaceholder.Name),n},editTemplate:function(n,t){var i=this.editControl=this._createTextBox();return i.val(n),(!e.settings.isRolMaster&&t!==f&&t.isStatic||t.isDeleted)&&i.addClass("disabled"),i}},{name:"displayName",title:t.grid.columnsDisplayName.DisplayName,type:"text",validate:"required",width:"30%",filterTemplate:function(){if(!this.filtering)return"";var t=this._grid,n=this.filterControl=this._createTextBox();if(this.autosearch)n.on("keyup",function(n){t.search();n.preventDefault()});return n},insertTemplate:function(){var n=jsGrid.fields.text.prototype.insertTemplate.apply(this,arguments);return n.attr("placeholder",t.grid.addRolePlaceholder.DisplayName),n},editTemplate:function(n){var t=this.editControl=this._createTextBox();return t.val(n),t}},{name:"isStatic",title:t.grid.columnsDisplayName.IsStatic,type:"checkbox",width:"10%",align:"center",autosearch:!0,visible:e.settings.isRolMaster,editTemplate:function(n,t){if(!this.editing)return this.itemTemplate(n);var i=this.editControl=this._createCheckbox();return i.prop({checked:n,disabled:t.isDeleted}),i}},{name:"isDefault",title:t.grid.columnsDisplayName.IsDefault,autosearch:!0,type:"checkbox",width:"10%",align:"center",visible:e.settings.isRolMaster||e.settings.isRolAdmin,editTemplate:function(n,t){if(!this.editing)return this.itemTemplate(n);var i=this.editControl=this._createCheckbox();return i.prop({checked:n,disabled:t.isDeleted}),i}},{name:"isDeleted",title:t.grid.columnsDisplayName.IsDeleted,autosearch:!0,type:"checkbox",width:"10%",align:"center",visible:e.settings.isRolMaster||e.settings.isRolAdmin,editTemplate:function(n,t){if(!this.editing)return this.itemTemplate(n);var i=this.editControl=this._createCheckbox();return i.prop({checked:n,disabled:t.isDefault||t.isStatic}),i}},{type:"control",width:"10%",align:"center",clearFilterButton:!1,searchButton:!1,visible:e.settings.isRolMaster||e.settings.isRolAdmin,_createDeleteButton:function(n){var r=this.deleteButtonTooltip,i=this.deleteButtonClass;return n.isStatic&&(r=t.grid.messages.roleIsStaticNotDelete.title,i=i+" disabled"),n.isDeleted&&(r=t.grid.messages.roleIsDeleting.title,i=i+" disabled"),n.isDefault&&(r=t.grid.messages.roleIsDefaultNotDelete.title,i=i+" disabled"),this._createGridButton(i,r,function(t,i){t.deleteItem(n);i.stopPropagation()})},_createGridButton:function(t,i,r){var u=this._grid;return n("<input>").addClass(this.buttonClass).addClass(t).attr({type:"button",title:i,"data-toggle":"tooltip"}).on("click",function(t){n(this).tooltip("hide");r(u,t)})}}]})},r=function(){};t();r()}if(n){var e,o={settings:n.extend(t.config.settings,{currentLanguageName:t.AREA.CONFIGURATION.ROLES.settings.currentLanguageName,isRolMaster:t.AREA.CONFIGURATION.ROLES.settings.isRolMaster,isRolAdmin:t.AREA.CONFIGURATION.ROLES.settings.isRolAdmin,setLanguageGrid:function(){this.currentLanguageName!=="en"&&jsGrid.locale(this.currentLanguageName)}}),elems:n.extend(t.config.elems,{getRoles:function(){var t={};return t.area=n("#RolesArea"),t.grid=t.area.find("#jsGrid"),t.grid.url={GetAllRoles:u.appPath+"Configuration/GetAllRoles",CreateRole:u.appPath+"Configuration/CreateRole",UpdateRole:u.appPath+"Configuration/UpdateRole",DeleteRole:u.appPath+"Configuration/DeleteRole"},t.grid.columnsDisplayName={Name:u.localization.abpWeb("CONFIG.ROLES.GRID.COLUMN.Name"),DisplayName:u.localization.abpWeb("CONFIG.ROLES.GRID.COLUMN.DisplayName"),IsStatic:u.localization.abpWeb("CONFIG.ROLES.GRID.COLUMN.IsStatic"),IsDefault:u.localization.abpWeb("CONFIG.ROLES.GRID.COLUMN.IsDefault"),IsDeleted:u.localization.abpWeb("CONFIG.ROLES.GRID.COLUMN.IsDeleted")},t.grid.addRolePlaceholder={Name:u.localization.abpWeb("CONFIG.ROLES.GRID.PLACEHOLDER.Name"),DisplayName:u.localization.abpWeb("CONFIG.ROLES.GRID.PLACEHOLDER.DisplayName")},t.grid.labels={STATIC:{name:u.localization.abpWeb("CONFIG.ROLES.GRID.LABEL.IsStatic.Name"),title:u.localization.abpWeb("CONFIG.ROLES.GRID.LABEL.IsStatic.Title")},DELETE:{name:u.localization.abpWeb("CONFIG.ROLES.GRID.LABEL.IsDeleted.Name"),title:u.localization.abpWeb("CONFIG.ROLES.GRID.LABEL.IsDeleted.Title")},DEFAULT:{name:u.localization.abpWeb("CONFIG.ROLES.GRID.LABEL.IsDefault.Name"),title:u.localization.abpWeb("CONFIG.ROLES.GRID.LABEL.IsDefault.Title")}},t.grid.messages={isSureDeleteRow:{title:u.localization.abpWeb("CONFIG.ROLES.GRID.MESSAGES.IsSureDeleteRow.Title"),content:function(n){return u.localization.abpWeb("CONFIG.ROLES.GRID.MESSAGES.IsSureDeleteRow.Content",n.name)}},roleIsStaticNotDelete:{title:u.localization.abpWeb("CONFIG.ROLES.GRID.MESSAGES.RoleIsStaticNotDelete.Title")},roleIsDeleting:{title:u.localization.abpWeb("CONFIG.ROLES.GRID.MESSAGES.RoleIsDeleting.Title")},roleIsDefaultNotDelete:{title:u.localization.abpWeb("CONFIG.ROLES.GRID.MESSAGES.RoleIsDefaultNotDelete.Title")}},t}}),validation:t.config.validation};return{init:s}}}(jQuery,SITE||{},window,document,abp);MODULE.init();