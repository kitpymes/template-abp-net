var MODULE=function(n,t,i,r,u){function o(t){e.settings=n.extend(e.settings,t);f=e;s()}function s(){var t=function(){f.settings.setFloatLabel()},i=function(){var t=f.elems.getProfile();f.settings.setFocusElem(t.form.find("input:not([type=hidden]):first"));f.settings.setDisabledElem(t.form.btn,!0);t.form.passwordIcon.mousedown(function(){t.form.passwordInput.attr("type","text")}).mouseup(function(){t.form.passwordInput.attr("type","password")}).mouseout(function(){t.form.passwordInput.attr("type","password")});t.form.passwordRepeatIcon.mousedown(function(){t.form.passwordRepeatInput.attr("type","text")}).mouseup(function(){t.form.passwordRepeatInput.attr("type","password")}).mouseout(function(){t.form.passwordRepeatInput.attr("type","password")});t.form.btn.click(function(i){if(i.preventDefault(),t.form.valid()){var r={Name:t.form.name.parent().hasClass("populated")?n.trim(t.form.name.val()):"",Surname:t.form.surname.parent().hasClass("populated")?n.trim(t.form.surname.val()):"",EmailAddress:t.form.emailAddress.parent().hasClass("populated")?n.trim(t.form.emailAddress.val()):"",Password:n.trim(t.form.password.val()),PasswordRepeat:n.trim(t.form.passwordRepeat.val())};u.ui.setBusy(null,f.settings.callAjaxServer(t.form.url,r).done(function(i){u.notify.success(i.message);var r=f.elems.getNav();r.navUserArea.find(".info").html("<p>"+n.trim(t.form.name.val())+"<\/p>");t.form.passwordInput.val().length>0&&t.form.passwordInput.val("");t.form.passwordRepeatInput.val().length>0&&t.form.passwordRepeatInput.val("")}))}});t.form.validate({rules:{Name:{required:!0,maxlength:f.validation.PROFILE.rule.Name_MaxLength},Surname:{required:!0,maxlength:f.validation.PROFILE.rule.Surname_MaxLength},EmailAddress:{required:!0,maxlength:f.validation.PROFILE.rule.EmailAddress_MaxLength,email:f.validation.addMethodEmail()},Password:{required:!1,minlength:f.validation.PROFILE.rule.Password_MinLength,maxlength:f.validation.PROFILE.rule.Password_MaxLength},PasswordRepeat:{required:!1,minlength:f.validation.PROFILE.rule.Password_MinLength,maxlength:f.validation.PROFILE.rule.Password_MaxLength,equalTo:"#PasswordInput"}},messages:{Name:{required:u.localization.abpWeb("COMMON.MSG.VALIDATION.Mandatory"),maxlength:u.localization.abpWeb("COMMON.MSG.VALIDATION.MaxLength",f.validation.PROFILE.rule.Name_MaxLength)},Surname:{required:u.localization.abpWeb("COMMON.MSG.VALIDATION.Mandatory"),maxlength:u.localization.abpWeb("COMMON.MSG.VALIDATION.MaxLength",f.validation.PROFILE.rule.Surname_MaxLength)},EmailAddress:{required:u.localization.abpWeb("COMMON.MSG.VALIDATION.Mandatory"),maxlength:u.localization.abpWeb("COMMON.MSG.VALIDATION.MaxLength",f.validation.PROFILE.rule.EmailAddress_MaxLength),email:u.localization.abpWeb("COMMON.MSG.VALIDATION.InvalidFormat")},Password:{minlength:u.localization.abpWeb("COMMON.MSG.VALIDATION.MinLength",f.validation.PROFILE.rule.Password_MinLength),maxlength:u.localization.abpWeb("COMMON.MSG.VALIDATION.MaxLength",f.validation.PROFILE.rule.Password_MaxLength)},PasswordRepeat:{minlength:u.localization.abpWeb("COMMON.MSG.VALIDATION.MinLength",f.validation.PROFILE.rule.Password_MinLength),maxlength:u.localization.abpWeb("COMMON.MSG.VALIDATION.MaxLength",f.validation.PROFILE.rule.Password_MaxLength),equalTo:u.localization.abpWeb("COMMON.MSG.VALIDATION.NotMatch")}},onkeyup:function(t){n(t).valid()},onfocusout:function(){return t.form.passwordInput.val()===t.form.passwordRepeatInput.val()},onclick:!1,highlight:function(n){f.validation.getHighlight(n);f.settings.setDisabledElem(t.form.btn,!0)},unhighlight:function(n){f.validation.getUnhighlight(n);t.form.find("div").hasClass("has-error")||t.form.passwordInput.val()!==t.form.passwordRepeatInput.val()||f.settings.setDisabledElem(t.form.btn,!1)},errorElement:"span",errorClass:"help-block",errorPlacement:function(n,t){t.length&&n.insertAfter(t)}})};t();i()}if(n){var f,e={settings:t.config.settings,elems:n.extend(t.config.elems,{getProfile:function(){var t={};return t.area=n("#ProfileArea"),t.form=t.area.find("form"),t.form.url=u.appPath+"Configuration/UpdateProfile",t.form.passwordInput=t.form.find("#PasswordInput"),t.form.passwordRepeatInput=t.form.find("#PasswordRepeatInput"),t.form.passwordIcon=t.form.find(".icon-password"),t.form.passwordRepeatIcon=t.form.find(".icon-password-repeat"),t.form.name=t.form.find("#NameInput"),t.form.surname=t.form.find("#SurnameInput"),t.form.emailAddress=t.form.find("#EmailAddressInput"),t.form.password=t.form.find("#PasswordInput"),t.form.passwordRepeat=t.form.find("#PasswordRepeatInput"),t.form.btn=t.form.find("[type='submit']"),t}}),validation:n.extend(t.config.validation,{PROFILE:{rule:t.AREA.CONFIGURATION.PROFILE.validation.getRules()}})};return{init:o}}}(jQuery,SITE||{},window,document,abp);MODULE.init();